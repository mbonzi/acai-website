!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=n(1),i=o(r),a=n(5),s=o(a),u="/create-from-shopapp=";new i["default"](window.Ecwid,u),new s["default"](window.Ecwid)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(2),s=o(a),u=n(3),c=o(u),d=n(4),l=o(d),f="shop-at-app-loading-style",h="shop-at-app-checkout-loading-style",p="CART",_=function(){function e(t,n){return r(this,e),t?(this._ecwid=t,void(this._parseRequest(n)&&(xAffiliate("ShopApp"),this._indicator=new s["default"](this._gotoCheckout?h:f),this._restoreCart()))):void console.log("ecwid module not found, skip loading")}return i(e,[{key:"_parseRequest",value:function(e){if(this._plainRequest=new c["default"](e,window.location.hash),this._plainRequest.hasBody){var t=decodeURIComponent(this._plainRequest.body);return this._request=l["default"].parse(t),this._productsArray=this._request&&this._request.products,this._productsArray&&Array.isArray(this._productsArray)&&0!==this._productsArray.length?(this._gotoCheckout=this._request.gotoCheckout===!0,this._profile=this._request.profile,!0):void console.log("incorrect object passed "+t)}}},{key:"_restoreCart",value:function(){var e=this;this._indicator.show(),this._ecwid.OnAPILoaded.add(function(){e._tryExecuteRequest()}),this._ecwid.OnPageLoaded.add(function(t){t.type===p&&e._indicator.scheduleFallbackHide()})}},{key:"_applyProfile",value:function(){this._profile&&(this._profile.address&&this._ecwid.Cart.setAddress(this._profile.address,function(){return console.log("address applied")},function(e,t){return console.error(e+t)}),this._profile.billingAddress&&this._ecwid.Cart.setBillingAddress(this._profile.billingAddress,function(){return console.log("billing address applied")},function(e,t){return console.error(e+t)}),this._profile.email&&this._ecwid.Cart.setCustomerEmail(this._profile.email,function(){return console.log("email applied")},function(e,t){return console.error(e+t)}),this._profile.orderComments&&this._ecwid.Cart.setOrderComments(this._profile.orderComments,function(){return console.log("order comments applied")},function(e,t){return console.error(e+t)}))}},{key:"_tryExecuteRequest",value:function(){var e=this;this._ecwid.Cart.clear(),this._applyProfile();var t=0;this._productsArray.forEach(function(n){n.callback=function(o,r){var i="adding "+(r?r.name:JSON.stringify(n))+"  "+o;o?console.log(i):console.error(i),t+=1,e._isAllProductsAdded(t)&&e._onAllProductsAdded()},e._ecwid.Cart.addProduct(n)}),this._cleanHistory(this._plainRequest.hashPrefix)}},{key:"_isAllProductsAdded",value:function(e){return e===this._productsArray.length}},{key:"_onAllProductsAdded",value:function(){var e=this;this._gotoCheckout&&this._ecwid.Cart.canGotoCheckout()?(this._ecwid.OnPageLoaded.add(function(t){t.type!==p&&e._indicator.hide()}),this._ecwid.Cart.gotoCheckout(function(){return e._indicator.scheduleDelayedHide()})):this._indicator.scheduleHide()}},{key:"_cleanHistory",value:function(e){window.history.replaceState(null,null,e),this._ecwid.customHistoryStateHandler&&this._ecwid.customHistoryStateHandler(window.location.hash)}}]),e}();t["default"]=_},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=500,i=2e3,a=12e3,s=function(){function e(t){n(this,e),this._loadingStyle=t,this._rootElement=document.body}return o(e,[{key:"show",value:function(){this._rootElement.classList.add(this._loadingStyle)}},{key:"hide",value:function(){this._rootElement.classList.remove(this._loadingStyle)}},{key:"_scheduleHide",value:function(e){var t=this;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){return t.hide()},e)}):setTimeout(function(){return t.hide()},e)}},{key:"scheduleHide",value:function(){this._scheduleHide(r)}},{key:"scheduleDelayedHide",value:function(){this._scheduleHide(i)}},{key:"scheduleFallbackHide",value:function(){this._scheduleHide(a)}}]),e}();t["default"]=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r="#!/~/cart",i=function(){function e(t,o){n(this,e);var i=r+t;if(o&&!(o.length<=i.length)){var a=o.indexOf(i);0===a&&(this._commandBody=o.substring(i.length))}}return o(e,[{key:"hashPrefix",get:function(){return r}},{key:"hasBody",get:function(){return!!this._commandBody}},{key:"body",get:function(){return this._commandBody}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(){n(this,e)}return o(e,null,[{key:"parse",value:function(e){try{return JSON.parse(e)}catch(t){console.error("Json parsing error",t)}}}]),e}();t["default"]=r},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=o(i),s=function c(e){r(this,c),this.Ecwid=e,u(e)};t["default"]=s;var u=function(e,t){if(!e)return void console.log("ecwid module not found, skip loading");var n=function(){function t(e){var t='(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode banner closeBanner creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setIdentity track validateCode".split(" "), 0);\nbranch.init(\''+e.app_branch_key+"');\nbranch.banner({\nicon: '"+e.app_icon+"',\ntitle: '"+e.app_title+"',\ndescription: '"+e.app_description+"',\nopenAppButtonText: 'Open',\ndownloadAppButtonText: 'Get App', \nshowiOS:"+(null==e.showiOS?!0:e.showiOS)+",\nshowAndroid:"+(null==e.showAndroid?!0:e.showAndroid)+",\nshowDesktop:"+(null==e.showDesktop?!0:e.showDesktop)+",\ncustomCSS: '"+(null==e.customCSS?"":e.customCSS)+"',}, {});",n=document.createElement("script");n.type="text/javascript",n.text=t,document.getElementsByTagName("head")[0].appendChild(n)}this.getSmartBanner=function(){var n=e.getAppPublicConfig("ecwid-shopapp");n=a["default"].parse(n);var o=n&&n.branch_metrics;o&&t(o)}};e.OnAPILoaded.add(function(){try{for(var t=e.getInitializedWidgets(),o=0;o<t.length;o++)if("ProductBrowser"==t[o]){var r=new n;r.getSmartBanner()}}catch(i){console.log("error",i)}})}}]);